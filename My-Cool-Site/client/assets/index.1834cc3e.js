import{r as e,c as t,o,a,b as n,F as r,d as s,e as c,f as i,g as l,C as u,i as d,S as p,h as m,p as g,j as h,t as b,w as v,k as f,l as w}from"./vendor.25bc970e.js";const E=e({user:{},account:{}});const A={name:"App",setup:()=>({appState:t((()=>E))})},k=n("footer",null,[n("div",{class:"bg-dark text-light text-center p-4"}," Made with ðŸ’– by CodeWorks ")],-1);A.render=function(e,t,c,i,l,u){const d=s("Navbar"),p=s("router-view");return o(),a(r,null,[n("header",null,[n(d)]),n("main",null,[n(p)]),k],64)};const T=window.location.origin.includes("localhost"),_=T?"http://localhost:3000":"";let C;const y={},O=function(e,t){if(!t||0===t.length)return e();if(void 0===C){const e=document.createElement("link").relList;C=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in y)return;y[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":C,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};function x(e){return()=>function(e){switch(e){case"./pages/AboutPage.vue":return O((()=>import("./AboutPage.839368e6.js")),["/assets/AboutPage.839368e6.js","/assets/vendor.25bc970e.js"]);case"./pages/AccountPage.vue":return O((()=>import("./AccountPage.12919e38.js")),["/assets/AccountPage.12919e38.js","/assets/AccountPage.f3fa63f7.css","/assets/vendor.25bc970e.js"]);case"./pages/HomePage.vue":return O((()=>import("./HomePage.7ed6b7b8.js")),["/assets/HomePage.7ed6b7b8.js","/assets/HomePage.6bd8444a.css","/assets/vendor.25bc970e.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const P=[{path:"/",name:"Home",component:x("HomePage")},{path:"/about",name:"About",component:x("AboutPage")},{path:"/account",name:"Account",component:x("AccountPage"),beforeEnter:l}],R=c({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:i(),routes:P});function S(e,t){if(T)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const L={log(){S("log",arguments)},error(){S("error",arguments)},warn(){S("warn",arguments)},assert(){S("assert",arguments)},trace(){S("trace",arguments)}},D=u.create({baseURL:_,timeout:8e3});const H=new class{async getAccount(){try{const e=await D.get("/account");E.account=e.data}catch(e){L.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}};let I=!1,N=[];const U="connected",j="authenticate",$="authenticated",B="error";const V=new class extends class{constructor(e=_){this.socket=d(e||_),this.on(U,this.onConnected).on($,this.onAuthenticated).on(B,this.onError)}on(e,t){return this.socket.on(e,t.bind(this)),this}onConnected(e){L.log("[SOCKET_CONNECTION]",e),I=!0}onAuthenticated(e){L.log("[SOCKET_AUTHENTICATED]",e);const t=[...N];N=[],t.forEach((e=>{this.emit(e.action,e.payload)}))}authenticate(e){this.socket.emit(j,e)}onError(e){L.error("[SOCKET_ERROR]",e)}emit(e,t){if(!I)return L.log("[ENQUEING_ACTION]",{action:e,payload:t}),N.push({action:e,payload:t});this.socket.emit(e,t)}}{constructor(){super(),this.on("error",this.onError)}onError(e){L.error("[SOCKET_ERROR]",e),class{static async confirm(e="Are you sure?",t="You won't be able to revert this!",o="warning",a="Yes, delete it!"){try{return!!(await p.fire({title:e,text:t,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:a})).isConfirmed}catch(n){return!1}}static toast(e="Warning!",t="warning",o="top-end",a=3e3,n=!0){p.fire({title:e,icon:t,position:o,timer:a,timerProgressBar:n,toast:!0,showConfirmButton:!1})}}.toast(e.message,"error")}},Y=m({domain:"codeworksclassroom.auth0.com",clientId:"pOXw2OGv1LsYi7LEBmDF04RLkXQvldml",audience:"https://codeworksclassroom.com",useRefreshTokens:!0,onRedirectCallback:e=>{R.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function W(e){if(!Y.isAuthenticated)return e;const t=1e3*Y.identity.exp,o=t<Date.now(),a=t<Date.now()+432e5;return o?await Y.loginWithPopup():a&&(await Y.getTokenSilently(),D.defaults.headers.authorization=Y.bearer,V.authenticate(Y.bearer)),e}Y.on(Y.AUTH_EVENTS.AUTHENTICATED,(async function(){D.defaults.headers.authorization=Y.bearer,D.interceptors.request.use(W),E.user=Y.user,await H.getAccount(),V.authenticate(Y.bearer)}));const K={setup:()=>({state:e({dropOpen:!1}),user:t((()=>E.user)),async login(){Y.loginWithPopup()},async logout(){Y.logout({returnTo:window.location.origin})}})},z=v("data-v-1fe0b358");g("data-v-1fe0b358");const q={class:"navbar navbar-expand-lg navbar-dark bg-dark"},F=n("div",{class:"d-flex flex-column align-items-center"},[n("img",{alt:"logo",src:"/assets/cw-logo.71baeadb.png",height:"45"})],-1),G=n("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[n("span",{class:"navbar-toggler-icon"})],-1),M={class:"collapse navbar-collapse",id:"navbarText"},Q={class:"navbar-nav mr-auto"},X={class:"nav-item"},J=f(" Home "),Z={class:"nav-item"},ee=f(" About "),te={class:"navbar-text"},oe={key:1,class:"dropdown"},ae={class:"mx-3"},ne=n("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);h();const re=z(((e,t,r,c,i,l)=>{const u=s("router-link");return o(),a("nav",q,[n(u,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:z((()=>[F])),_:1}),G,n("div",M,[n("ul",Q,[n("li",X,[n(u,{to:{name:"Home"},class:"nav-link"},{default:z((()=>[J])),_:1})]),n("li",Z,[n(u,{to:{name:"About"},class:"nav-link"},{default:z((()=>[ee])),_:1})])]),n("span",te,[c.user.isAuthenticated?(o(),a("div",oe,[n("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>c.state.dropOpen=!c.state.dropOpen)},[n("img",{src:c.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),n("span",ae,b(c.user.name),1)]),n("div",{class:["dropdown-menu p-0 list-group w-100",{show:c.state.dropOpen}],onClick:t[4]||(t[4]=e=>c.state.dropOpen=!1)},[n(u,{to:{name:"Account"}},{default:z((()=>[ne])),_:1}),n("div",{class:"list-group-item list-group-item-action hoverable",onClick:t[3]||(t[3]=(...e)=>c.logout&&c.logout(...e))}," logout ")],2)])):(o(),a("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:t[1]||(t[1]=(...e)=>c.login&&c.login(...e))}," Login "))])])])}));K.render=re,K.__scopeId="data-v-1fe0b358";var se=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:K});const ce=w(A);!function(e){const t={"./components/Navbar.vue":se};Object.entries(t).forEach((([t,o])=>{const a=o.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(a,o.default)}))}(ce),ce.use(R).mount("#app");export{E as A};
